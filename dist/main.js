(()=>{"use strict";function e(e){e.classList.add("popup_opened")}function t(e){e.classList.remove("popup_opened")}function o(e){e.classList.add("form-profile__button_inactive")}var n={baseUrl:"https://nomoreparties.co/v1/plus-cohort-24",headers:{authorization:"665a484f-7a32-43f2-b793-9f53818a755f","Content-Type":"application/json"}},r=document.querySelector(".elements"),c=(document.querySelectorAll("#place-name, #place-way"),document.querySelector(".place-viewing__image")),l=document.querySelector(".place-viewing__caption"),u=(viewing.querySelector(".viewing-container").querySelector("#viewing-close"),document.querySelector("#place-name")),a=document.querySelector("#place-way");function i(t,o){var n=document.querySelector("#card-template").content.querySelector(".element").cloneNode(!0),r=n.querySelector(".element__image"),u=n.querySelector(".element__signature"),a=u.querySelector(".element__name");r.src="".concat(t),a.textContent="".concat(o),r.alt="".concat(o),u.querySelector(".element__choice").addEventListener("click",(function(e){e.target.classList.toggle("element__choice_active"),console.log("Лайк карточки")}));var i=n.querySelector(".element__delete");return i.addEventListener("click",(function(e){var t=i.closest(".element");console.log("Удаление карточки"),t.remove()})),r.addEventListener("click",(function(n){c.src="".concat(t),c.alt="".concat(o),l.textContent="".concat(o),e(viewing)})),n}fetch("".concat(n.baseUrl,"/cards"),{headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){e.forEach((function(e){var t,o;t=e.link,o=e.name,r.append(i(t,o))}))})).catch((function(e){console.log(e)}));var d=document.querySelector(".page"),f=d.querySelector(".content").querySelector(".profile").querySelector(".profile__container").querySelector(".profile__info"),s=f.querySelector(".profile__text"),m=f.querySelector(".profile__name-conteiner"),p=m.querySelector(".profile__name"),y=d.querySelector(".profile-popup"),v=d.querySelector("#place"),_=m.querySelector(".profile__edit-button"),q=document.forms["form-profile"],S=q.querySelector('[name="speсial"]'),g=q.querySelector('[name="name"]'),h=document.querySelectorAll(".popup"),E=document.querySelector(".profile__add-button"),L=document.querySelector("#place-button");(_.addEventListener("click",(function(){g.value=p.textContent,S.value=s.textContent,e(y)})),E.addEventListener("click",(function(){o(L),e(v)})),h.forEach((function(e){e.addEventListener("mousedown",(function(o){o.target===e&&t(e)}))})),h.forEach((function(e){document.addEventListener("keydown",(function(o){"Escape"===o.code&&e.classList.contains("popup_opened")&&t(e)}))})),document.querySelectorAll(".popup__close")).forEach((function(e){var o=e.closest(".popup");e.addEventListener("click",(function(){return t(o)}))}));var b=document.querySelector(".profile-popup"),x=document.querySelector(".form"),C=(document.querySelectorAll(".form"),document.querySelector(".form-profile__text-error")),w=x.querySelector(".form-profile__button"),k=document.querySelector("#place-button"),A=document.querySelector('[name="name"]'),M=document.querySelector('[name="speсial"]'),j=document.querySelector(".profile__name"),D=document.querySelector(".profile__text"),U=(x.querySelectorAll(".form-profile__button"),function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));(t.textContent="")?n.textContent=C.textContent:n.textContent=o}),V=function(e,t){e.querySelector(".".concat(t.id,"-error")).textContent=""},z=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,function(e){e.classList.remove("form-profile__button_inactive")}(t)):(t.disabled=!0,o(t))},N=document.forms["form-profile"];document.forms["card-form"].addEventListener("submit",(function(e){var o,n;e.preventDefault(),n=u.value,""!==(o=a.value)&&""!==n&&r.prepend(i(o,n)),t(place),e.target.reset()})),Array.from(document.querySelectorAll(".form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".form-profile__text"));t.forEach((function(o){o.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?V(e,t):U(e,t,t.validationMessage)}(e,o),function(e,t){t.validity.valid?V(e,t):U(e,t,t.validationMessage)}(e,o),z(t,w),z(t,k)}))}))}(e)})),N.addEventListener("submit",(function(e){e.preventDefault();var o=A.value,n=M.value;""!==o&&""!==n&&(j.textContent=o,D.textContent=n),t(b)}))})();
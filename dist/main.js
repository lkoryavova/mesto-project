(()=>{"use strict";function e(e){e.classList.add("popup_opened")}function t(e){e.classList.remove("popup_opened")}const o=document.querySelector(".elements"),r=(document.querySelectorAll("#place-name, #place-way"),document.querySelector(".place-viewing__image")),n=document.querySelector(".place-viewing__caption"),c=(viewing.querySelector(".viewing-container").querySelector("#viewing-close"),document.querySelector("#place-name")),l=document.querySelector("#place-way");function i(t,o){const c=document.querySelector("#card-template").content.querySelector(".element").cloneNode(!0),l=c.querySelector(".element__image"),i=c.querySelector(".element__signature"),a=i.querySelector(".element__name");l.src=`${t}`,a.textContent=`${o}`,l.alt=`${o}`,i.querySelector(".element__choice").addEventListener("click",(function(e){e.target.classList.toggle("element__choice_active"),console.log("Лайк карточки")}));const u=c.querySelector(".element__delete");return u.addEventListener("click",(function(e){const t=u.closest(".element");console.log("Удаление карточки"),t.remove()})),l.addEventListener("click",(function(c){r.src=`${t}`,r.alt=`${o}`,n.textContent=`${o}`,e(viewing)})),c}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{var t,r;t=e.link,r=e.name,o.append(i(t,r))}));const a=document.querySelector(".page"),u=a.querySelector(".content").querySelector(".profile").querySelector(".profile__container").querySelector(".profile__info"),s=u.querySelector(".profile__text"),d=u.querySelector(".profile__name-conteiner"),p=d.querySelector(".profile__name"),m=a.querySelector(".profile-popup"),f=a.querySelector("#place"),y=(a.querySelector("#viewing"),d.querySelector(".profile__edit-button")),_=document.forms["form-profile"],v=_.querySelector('[name="speсial"]'),q=_.querySelector('[name="name"]'),S=document.querySelectorAll(".popup"),g=document.querySelector(".profile__add-button");(y.addEventListener("click",(function(t){q.value=p.textContent,v.value=s.textContent,e(m)})),g.addEventListener("click",(function(t){e(f)})),S.forEach((e=>{e.addEventListener("mousedown",(function(o){o.target===e&&t(e)}))})),S.forEach((e=>{document.addEventListener("keydown",(o=>{"Escape"===o.code&&e.classList.contains("popup_opened")&&t(e)}))})),document.querySelectorAll(".popup__close")).forEach((e=>{const o=e.closest(".popup");e.addEventListener("click",(()=>t(o)))}));const k=document.querySelector(".profile-popup"),x=document.querySelector(".form"),h=(document.querySelectorAll(".form"),document.querySelector(".form-profile__text-error")),E=(document.querySelector(".form-profile__button"),document.querySelector('[name="name"]')),L=document.querySelector('[name="speсial"]'),b=document.querySelector(".profile__name"),C=document.querySelector(".profile__text"),w=(x.querySelectorAll(".form-profile__button"),(e,t,o)=>{const r=e.querySelector(`.${t.id}-error`);(t.textContent="")?r.textContent=h.textContent:r.textContent=o}),A=(e,t)=>{e.querySelector(`.${t.id}-error`).textContent=""},$=(e,t)=>{(e=>e.some((e=>!e.validity.valid)))(e)?(x.formProfileButton.disabled=!0,x.formProfileButton.classList.add("form-profile__button_inactive")):(x.formProfileButton.disabled=!1,x.formProfileButton.classList.remove("form-profile__button_inactive"))};document.querySelector(".popup");const j=document.forms["form-profile"];document.forms["card-form"].addEventListener("submit",(function(e){e.preventDefault();var r,n;n=c.value,""!==(r=l.value)&&""!==n&&o.prepend(i(r,n)),t(place),e.target.reset()})),Array.from(document.querySelectorAll(".form")).forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault()})),(e=>{const t=Array.from(e.querySelectorAll(".form-profile__text"));t.forEach((o=>{o.addEventListener("input",(()=>{((e,t)=>{t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?A(e,t):w(e,t,t.validationMessage)})(e,o),((e,t)=>{t.validity.valid?A(e,t):w(e,t,t.validationMessage)})(e,o),$(t)}))}))})(e)})),j.addEventListener("submit",(function(e){e.preventDefault();const o=E.value,r=L.value;""!==o&&""!==r&&(b.textContent=o,C.textContent=r),t(k)}))})();